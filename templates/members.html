{% extends "base.html" %}

{% block content %}
<div class="animate-slide-up">
  <div class="dashboard-header">
    <div>
      <h1 class="gradient-text">Members</h1>
      <p>{{ members|length }} members</p>
    </div>
  </div>

  <div class="card" style="padding: 0; overflow: hidden;">
    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Joined</th>
            <th>Member</th>
            <th>City</th>
            <th>Tier</th>
            <th>Status</th>
            <th>Referral</th>
          </tr>
        </thead>
        <tbody>
          {% for m in members %}
          <tr onclick="window.location.href='/ui/admin/chat?phone={{ m.phone | urlencode }}'" style="cursor: pointer;">
            <td class="text-muted text-xs">{{ m.join_date }}</td>
            <td>
              <div class="flex items-center gap-2">
                <div class="avatar-sm">{{ (m.name or m.phone)[0].upper() }}</div>
                <div>
                  <div class="font-bold text-sm">{{ m.name or 'Unnamed' }}</div>
                  <div class="text-xs text-muted font-mono">{{ m.phone }}</div>
                </div>
              </div>
            </td>
            <td class="text-xs">{{ m.city or '---' }}</td>
            <td>
              {% if m.membership_type %}
              <span class="pill pill-neutral">{{ m.membership_type }}</span>
              {% else %}
              <span class="text-muted text-xs">Regular</span>
              {% endif %}
            </td>
            <td>
              {% if m.payment_status == 'paid' %}
              <span class="pill pill-success">Paid</span>
              {% else %}
              <span class="pill pill-warning">{{ m.payment_status or 'Pending' }}</span>
              {% endif %}
            </td>
            <td>
              <span class="font-mono text-xs text-accent">{{ m.referral_code or '---' }}</span>
            </td>
          </tr>
          {% endfor %}
          {% if not members %}
          <tr>
            <td colspan="6" class="text-muted" style="text-align: center; padding: 2rem;">No members found</td>
          </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
  .avatar-sm {
    width: 28px;
    height: 28px;
    background: var(--brand-gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 0.6875rem;
    flex-shrink: 0;
  }
</style>
{% endblock %}
